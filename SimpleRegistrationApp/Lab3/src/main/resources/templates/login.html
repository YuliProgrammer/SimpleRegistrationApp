<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="style/main.css">
    <title>Login</title>
</head>

<script>
		var isFormValid = true;

		function validateEmail(){
			validateElement("userEmail");
		}

		function validatePassword(){
			validateElement("userPassword");
		}

		function validateForm(){
			validateEmail();
			validatePassword();
			return isFormValid;
		}

		function validateElement(elementName){
			var element = document.forms["myForm"][elementName].value.toString();
			if (element.trim() === "") {
				document.getElementById(elementName).className="error";
				isFormValid = false;
			} else {
				document.getElementById(elementName).className="input";
			}
		}
</script>

<div class="container">

    <div class="title">
        <div class="col-md-auto">
            <h1>Nice to see you again! Please enter your login details:</h1>
        </div>
    </div>

    <form name="myForm" class="form" action="perform_login" method="post" onsubmit="return validateForm()">
        <div th:if="${error}">
            <div class="errorMessage" th:text=" ${error}"></div>
        </div>
        <ul>
            <li>
                <label for="userEmail">Email:</label>
                <input type="email" id="userEmail" name="email" class="input" placeholder="harry.potter@gmail.com"
                       pattern="^[A-z0-9.-]+[A-z0-9]@[A-z0-9][A-z0-9.-]+\.[A-z]{2,}$"
                       onchange="validateEmail()"/>
            </li>
            <li>
                <label for="userPassword">Password:</label>
                <input type="password" id="userPassword" name="password" class="input" placeholder="HarryPotter123"
                       pattern="(?!.*\s)^(?=.*[A-Z])(?=.*[0-9]).{8,}$"
                       title="Password must contain at least one uppercase letter, one lowercase letter, one digit and at least 8 characters."
                       onchange="validatePassword()"/>
            </li>
            <hr>
            <li>
                <div class="center">
                    <input type="submit" class="submit" value="Log in">
                </div>
            </li>
            <li>
                <label class="prompt">Don't have an account?</label>
                <a href="registration"> Register! </a>
            </li>
        </ul>
    </form>

    <header th:insert="fragments/signature.html :: signature"> </header>

</div>
</body>
</html>
